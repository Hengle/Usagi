AttributeSets:
  - name: model_attributes
    attributes:
      - { index: 0, hint: "position", type: vec3 }
      - { index: 1, hint: "normal",   type: vec3 }
      - { index: 2, hint: "tangent",  type: vec3, default: [ 0.0, 1.0, 0.0 ] }
      - { index: 10, hint: "binormal", type: vec3, default: [ 0.0, 1.0, 0.0 ] }
      - { index: 3, hint: "blendindex", type: uvec4, default: [ 0, 0, 0, 0 ] }
      - { index: 4, hint: "blendweight", type: vec4, default: [ 1.0, 0, 0, 0 ]  }
      - { index: 5, hint: "color", type: vec4, default: [ 1.0, 1.0, 1.0, 1.0 ] }
      - { index: 6, hint: "uv0", type: vec2, default: [0.0, 0.0] }
      - { index: 7, hint: "uv1", type: vec2, default: [0.0, 0.0] }
      - { index: 8, hint: "uv2", type: vec2, default: [0.0, 0.0] }
      - { index: 9, hint: "uv3", type: vec2, default: [0.0, 0.0] }
DescriptorSets:
  - name: model_descriptors
    Samplers:
      - { index: 0, hint: "DiffuseColor", default: "Textures/white_default" }
      - { index: 1, hint: "NormalMap", default: "Textures/normal_default", defines: "HAS_BUMP !SHADOW_PASS" }
      - { index: 2, hint: "EmissiveFactor", default: "Textures/black_default", defines: "!SHADOW_PASS"  }
      - { index: 3, hint: "SpecularColor", default: "Textures/black_default", defines: "!SHADOW_PASS"  }
      - { index: 4, hint: "Reflection", default: "Textures/white_cube", defines: "!SHADOW_PASS"  }      
    ConstantSets:      
      - name: uVSMaterial
        binding: <%= Usg::ShaderConstantType::SHADER_CONSTANT_MATERIAL %>   
        shaderType: <%= Usg::ShaderConstantType::SHADER_FLAG_VERTEX %>   
        Variables:
         - { type: mat3x4,   name: mTexMatrix,    count: 4  }  # 0
         - { type: int,      name: iBoneCount,    count: 1, default: 0  }  # 0
         - { type: bool,     name: bBumpMap,      count: 1, default: false  }  # 0
      - name: uMaterial
        binding: <%= Usg::ShaderConstantType::SHADER_CONSTANT_MATERIAL_1 %>
        shaderType: <%= Usg::ShaderConstantType::SHADER_FLAG_PIXEL %>   
        Variables:
          - { type: vec4,   name: emission,       count: 1 }  # 0
          - { type: vec4,   name: diffuse,        count: 1 }  # 16
          - { type: vec4,   name: specular,       count: 1 }  # 32
          - { type: float,  name: reflectionfactor, count: 1 } # 48
          - { type: float,  name: specularpow,    count: 1, default: 10.0 } # 52
          - { type: float,  name: alpha,          count: 1, default: 1.0 } # 56
          - { type: bool,   name: bDiffuseMap,    default: false } # 60
          - { type: bool,   name: bBumpMap,       default: false } # 64
          - { type: bool,   name: bSpecMap,       default: false } # 68
          - { type: bool,   name: bEmissiveMap,   default: false } # 72            
          - { type: bool,   name: bReflectionMap, default: false } # 76
Effects:
  - name: FBXDefault
    vert: models/fbxdefault
    frag: models/fbxdefault
    attributes: model_attributes
    descriptors:
      - model_descriptors
    customfx: FBXDefault # TODO: Rather than specifying this set these shaders should be auto generated by FBXDefault.yml
    define_sets:
      - name: deferred
        defines: DEFERRED_SHADING
      - name: depth
        defines: SHADOW_PASS
      - name: translucent
        defines: TRANSLUCENT_PASS
    global_sets:  # A variant of all the above with these sets will be automatically added
      - name: skel
        defines: HAS_SKELETON
      - name: bump
        defines: HAS_BUMP
      - name: skel.bump
        defines: HAS_SKELETON HAS_BUMP
  - name: FBXDefault
    vert: models/fbxdefault
    geom: shadows/depthwriteomni
    frag: shadows/depthwriteomni
    has_default: false
    define_sets:
      - name: omni_depth
        defines: SHADOW_PASS OMNI_DEPTH
    global_sets:  
      - name: skel
        defines: HAS_SKELETON        